\ProvidesPackage{knowledge}[A custom package for the knowledge book]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Basic
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{hyperref}
\hypersetup{
colorlinks=true,citecolor=blue,linkcolor=blue,linktocpage=true
}
\usepackage{graphicx}
\usepackage[english]{babel}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Formatting
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%\usepackage{todonotes}
\usepackage{xhfill}
\usepackage{xcolor}
\usepackage[symbol]{footmisc}
% Custom font
%\renewcommand{\familydefault}{\sfdefault}

%\usepackage{unicode-math} % lowercase and uppercase cursive

% For colored boxes
\usepackage{tcolorbox}
\tcbuselibrary{most}
\tcbuselibrary{listings}

% creates the following command: \footnote[num]{text} 
\renewcommand{\thefootnote}{\fnsymbol{footnote}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Math
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{tikz}
\usetikzlibrary{calc} 
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{mathtools}
\usepackage{amsthm}
% Automatically resize parenthses
% https://tex.stackexchange.com/a/36296/164825
\delimitershortfall=-1pt


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Programming
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Python Code

% Default fixed font does not support bold face
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{8} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{8}  % for normal

% Custom colors
\usepackage{color}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\usepackage{listings}

% Python style for highlighting
\newcommand\pythonstyle{\lstset{
    language=Python,
    basicstyle=\ttm,
    morekeywords={self},              % Add keywords here
    keywordstyle=\ttb\color{deepblue},
    commentstyle=\color{codegreen},
    stringstyle=\color{codepurple},
    emph={MyClass,__init__},          % Custom highlighting
    emphstyle=\ttb\color{deepred},    % Custom highlighting style
    stringstyle=\color{deepgreen},
    frame=tb,                         % Any extra options here
    showstringspaces=false
    backgroundcolor=\color{backcolour},   
    numberstyle=\tiny\color{codegray},
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}}


% Python environment
\lstnewenvironment{python}[1][]
{
\pythonstyle
\lstset{#1}
}
{}

% Python for external files
\newcommand\pythonexternal[2][]{{
\pythonstyle
\lstinputlisting[#1]{#2}}}

% Python for inline
\newcommand\pythoninline[1]{{\pythonstyle\lstinline!#1!}}

% Terminal

\newtcblisting{term}{colback=black!50!black,
colupper=white,
colframe=gray!65!black,
listing only,
listing options={style=tcblatex,language=sh,escapeinside=||,showstringspaces=false},
every listing line={\textcolor{lime}{\small\ttfamily\bfseries user@machine{\textcolor{white}:}\textcolor{cyan!60}{\url{~}}{\textcolor{white}\#} }}}


\newlength{\Lind}
\setbox0\hbox{\small\ttfamily\bfseries root@}
\setlength{\Lind}{\the\dimexpr\wd0+1pt}
\newcommand{\LR}{\\\hspace*{-\Lind}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 'dedication' environment: To add a dedication paragraph at the start of book %
% Source: http://www.tug.org/pipermail/texhax/2010-June/015184.html            %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newenvironment{dedication}
{
   \cleardoublepage
   \thispagestyle{empty}
   \vspace*{\stretch{1}}
   \hfill\begin{minipage}[t]{0.66\textwidth}
   \raggedright
}
{
   \end{minipage}
   \vspace*{\stretch{3}}
   \clearpage
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Chapter styling                              %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{titlesec}

\titleformat{\chapter}[hang]  
{\normalfont\huge\bfseries\centering}{\chaptertitlename\ \thechapter:}{.5em}{}  
\titlespacing{\chapter}{0pt}{-32pt}{1cm}% <-- CHANGE DONE HERE!!

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% First page of book which contains 'stuff' like: %
%  - Book title, subtitle                         %
%  - Book author name                             %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Book's title and subtitle
\title{\Huge \textbf{The Knowledge}}
% Author
\author{\textsc{Callum Cassidy-Nolan}\thanks{\url{cuppajoeman.com}}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Colored Boxes
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\makeatletter
\tcbset{
  % definition
  list level/.store in=\kvtcb@listlevel,
  list indent/.store in=\kvtcb@listindent,
  list numwidth/.store in=\kvtcb@listnumwidth,
  % init
  list level=1, list indent=1.5em, list numwidth=2.3em
}

\renewcommand*\l@tcolorbox{%
  \@dottedtocline{\kvtcb@listlevel}{\kvtcb@listindent}{\kvtcb@listnumwidth}}
\makeatother

\newtcbtheorem[auto counter, number within=section,list inside=definitions]{definition}%
  {Definition}{fonttitle=\bfseries\upshape, fontupper=\slshape,
  arc=0mm, colback=green!5!white,colframe=green!75!black}{definition}

\newtcbtheorem[auto counter, number within=section,list inside=theorems]{theorem}
  {Theorem}{fonttitle=\bfseries\upshape, fontupper=\slshape,
     arc=0mm, colback=blue!5!white,colframe=blue!75!black}{theorem}

\newtcbtheorem[auto counter, number within=section,list inside=propositions]{proposition}%
  {Proposition}{fonttitle=\bfseries\upshape, fontupper=\slshape,
     arc=0mm, colback=orange!5!white,colframe=orange!75!black}{proposition}

\newtcbtheorem[auto counter, number within=section,list inside=lemmas]{lemma}%
  {Lemma}{fonttitle=\bfseries\upshape, fontupper=\slshape,
     arc=0mm, colback=purple!5!white,colframe=purple!75!black}{lemma}

\newtcbtheorem[auto counter, number within=section,list inside=corollaries]{corollary}%
  {Corollary}{fonttitle=\bfseries\upshape, fontupper=\slshape,
     arc=0mm, colback=pink!5!white,colframe=pink!75!black}{corollary}

\newtcbtheorem[auto counter, number within=section,list inside=examples]{example}%
  {Example}{fonttitle=\bfseries\upshape, fontupper=\slshape,
     arc=0mm, colback=yellow!5!white,colframe=yellow!75!black}{example}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Proof
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% If the class defines either a macro or an environment called proof, add the instructions \let\proof\relax and \let\endproof\relax before loading amsthm.
\let\proof\relax 
\let\endproof\relax

\AtEndEnvironment{proof}{\null\hfill\textcolor{black}{$\blacksquare$}}%

\newtcolorbox{proof}{
  fonttitle=\bfseries,
  breakable,
  enhanced,
  colback=black!5!white,
  colframe=black!75!black,
  coltitle=white,
  title=Proof
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Custom Symbols
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\makeatletter
\newcommand{\superimpose}[2]{%
  {\ooalign{$#1\@firstoftwo#2$\cr\hfil$#1\@secondoftwo#2$\hfil\cr}}}
\makeatother

% Distinct in
\newcommand{\din}{\mathrel{\mathpalette\superimpose{{\sqsubset}{-}}}}

